let dragonflies = [
    {
        "Family": "Calopterygidae", 
        "Scientific": "Calopteryx virgo", 
        "English": "Beautiful Demoiselle"}, 
    // {
    //     "Family": "Calopterygidae", 
    //     "Scientific": "Calopteryx virgo ssp. Meridionale",
    //     "English": "Beautiful Demoiselle ssp. Meridionale"}, 
    {
        "Family": "Calopterygidae", 
        "Scientific": "Calopteryx splendens", 
        "English": "Banded demoiselle"}, 
    // {
    //     "Family": "Calopterygidae", 
    //     "Scientific": "Calopteryx splendens ssp. Balkanica",
    //     "English": "Banded demoiselle ssp. Balkanica"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Erythromma najas", 
        "English": "Red-eyed damselfly"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Erythromma viridulum", 
        "English": "Small red-eyed damselfly"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Erythromma lindeni", 
        "English": "Goblet-marked damselfly"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Enallagma cyathigerum", 
        "English": "Common blue damselfly"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Ischnura elegans", 
        "English": "Blue-tailed damselfy"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Ischnura pumilio", 
        "English": "Scarce Blue-tailed Damselfly"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Ceriagrion tenellum", 
        "English": "Small red damselfly"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Coenagrion ornatum", 
        "English": "Ornate bluet"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Coenagrion puella", 
        "English": "Azure damselfly",
        image: "images/coenagrioin-puella.JPG"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Coenagrion pulchellum", 
        "English": "Variable damselfly"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Coenagrion scitulum", 
        "English": "Dainty bluet"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Pyrrhosoma elisabethae", 
        "English": "Greek red damsel"}, 
    {
        "Family": "Coenagrionidae", 
        "Scientific": "Pyrrhosoma nymphula", 
        "English": "Large red damsel"}, 
    {
        "Family": "Lestidae", 
        "Scientific": "Chalcolestes (Lestes) viridis", 
        "English": "Emerald (W. Willow speadwing)"}, 
    {
        "Family": "Lestidae", 
        "Scientific": "Chalcolestes (Lestes) parvidens", 
        "English": "E. willow spreadwing"}, 
    {
        "Family": "Lestidae", 
        "Scientific": "Lestes barbarus", 
        "English": "S. emerald / Shy emerald"}, 
    {
        "Family": "Lestidae", 
        "Scientific": "Lestes macrostigma", 
        "English": "Dark spreadwing"}, 
    {
        "Family": "Lestidae", 
        "Scientific": "Lestes virins", 
        "English": "Small (emerald) spreadwing"}, 
    {
        "Family": "Lestidae", 
        "Scientific": "Sympecma fusca", 
        "English": "Winter damsalfly"}, 
    {
        "Family": "Platycnmeididae", 
        "Scientific": "Platycnemis pennipes", 
        "English": "White-legged/ Blue featherleg"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Aeshna affinis", 
        "English": "S. migrant / Blue-eyed hawker"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Aeshna isosceles", 
        "English": "Green-eyed (Norfolk) hawker"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Aeshna mixta", 
        "English": "Migrant hawker"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Anax ephippiger*", 
        "English": "Vagrant emperor"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Anax immaculifrons (EAST)", 
        "English": "Magnificent emperor"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Anax imperator", 
        "English": "(Blue) Emperor dragonfly"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Anax parthenope", 
        "English": "Lesser emperor dragonfly"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Brachytron pratense", 
        "English": "Hairy hawker"}, 
    {
        "Family": "Aeshnidae", 
        "Scientific": "Caliaeshna microstigma", 
        "English": "Shady hawker"}, 
    {
        "Family": "Cordulegastridae", 
        "Scientific": "Cordulegaster bidentata NT", 
        "English": "Sombre goldenring"}, 
    {
        "Family": "Cordulegastridae", 
        "Scientific": "Cordulegaster picta EAST LC", 
        "English": "Turkish goldenring"}, 
    {
        "Family": "Cordulegastridae", 
        "Scientific": "Cordulegaster hel. ssp. Helladica EN", 
        "English": "Greek goldenring"}, 
    {
        "Family": "Cordulegastridae", 
        "Scientific": "Cordulegaster heros", 
        "English": "Balkan goldenring"}, 
    {
        "Family": "Cordulegastridae", 
        "Scientific": "Cordulegaster insignis", 
        "English": "Blue-eyed goldenring"}, 
    {
        "Family": "Corduliidae", 
        "Scientific": "Cordulia aenea", 
        "English": "Downy emerald"}, 
    {
        "Family": "Corduliidae", 
        "Scientific": "Somatochlora borisi EAST VU", 
        "English": "Bulgarian emperor"}, 
    {
        "Family": "Corduliidae", 
        "Scientific": "Somatochlora flavomaculata", 
        "English": "Yellow-spotted emperor"}, 
    {
        "Family": "Corduliidae", 
        "Scientific": "Somatochlora meidionalis", 
        "English": "Balkan emerald"}, 
    {
        "Family": "Gomphidae", 
        "Scientific": "Gomphus flavipes", 
        "English": "River clubtail"}, 
    {
        "Family": "Gomphidae", 
        "Scientific": "Gomphus schneiderii", 
        "English": "Turkish clubtail"}, 
    {
        "Family": "Gomphidae", 
        "Scientific": "Gomphus vulgatissimus", 
        "English": "Clubtail"}, 
    {
        "Family": "Gomphidae", 
        "Scientific": "Lindenia tetraphylla", 
        "English": "Bladetail"}, 
    {
        "Family": "Gomphidae", 
        "Scientific": "Onychogomphus forcipatus", 
        "English": "Small pincertail"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Crocothemis erythraea", 
        "English": "Broad scarlet"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Libellula depressa", 
        "English": "Broad-bodied chaser"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Libellula fulva", 
        "English": "Blue chaser"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Libellula quadrimaculata", 
        "English": "Four-spotted chaser"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Orthetrum albistylum", 
        "English": "White-tailed skimmer"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Orthetrum brunneum", 
        "English": "Southern skimmer"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Orthetrum cancellatum", 
        "English": "Black-tailed skimmer"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Orthetrum coerulescens", 
        "English": "Keeled skimmer"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Orthetrum ramburi?"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Selysiothemis nigra", 
        "English": "Black pennant"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Sympetrum depressiusculum VU", 
        "English": "Spotted darter"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Sympetrum flaveolum", 
        "English": "Yellow-winged darter"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Sympetrum fonscolombei", 
        "English": "Red-veined darter"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Sympetrum meridionale", 
        "English": "Southern darter"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Sympetrum pedemontanum"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Sympetrum sanguineum", 
        "English": "Ruddy darter"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Sympetrum striolatum", 
        "English": "Common darter"}, 
    {
        "Family": "Libellulidae", 
        "Scientific": "Sympetrum vulgatum", 
        "English": "Vagrant darter"}
]

// Page loads with all Dragonflies
// a. dragonflies rendered via a HTML table with class "name"
// b. as user types, dragonflies displayed or not via a loop on "name"

// a. HTML table

const dragonflyDisplay = document.getElementById("dragonfly-display")


function renderDragonflies() {
    dragonflyDisplay.style.flexDirection = "column"
    let allDragonflies = ""
    for (let i = 0; i < dragonflies.length; i++) {
        allDragonflies += 
            `
           
            <div class="name">
        
                <span id='family'><i>${dragonflies[i].Family}</i></span>
            
        
                <span id='scientific'><i>${dragonflies[i].Scientific}</i></span>
            
        
                <span id='english'>${dragonflies[i].English}</span>
                
            </div>
           
            `

    } 
    dragonflyDisplay.innerHTML = allDragonflies
    
}

renderDragonflies()

// b. loop on "name"

let searchInput = document.getElementById("search-input")

searchInput.addEventListener("keyup", function(event) {
    let searchQuery = event.target.value.toLowerCase()
    let allNamesDOMCollection = document.getElementsByClassName("name")

 

    for (let i = 0; i < allNamesDOMCollection.length; i++) {
        const currentName = allNamesDOMCollection[i].textContent.toLowerCase()

        if (currentName.includes(searchQuery)) {
        

            dragonflyDisplay.style.flexDirection = "row"
            



            allNamesDOMCollection[i].style.display = "flex"

            allNamesDOMCollection[i].style.background = "white"
            
            allNamesDOMCollection[i].style.padding = "0"

            allNamesDOMCollection[i].style.margin = "0"

            // a. simple original version - works
            // allNamesDOMCollection[i].innerHTML =
            // `
            // <td id='scientific'>
            //     <i>${dragonflies[i].Scientific}
            //     <br>
            //     ${dragonflies[i].English}</i>
            // </td>
            // `

            // b. attempt to create wrapping flex boxes with silver borders

            allNamesDOMCollection[i].innerHTML = 
            `
                <div class = 'flex-item'>
                    <span id = "family"><i>${dragonflies[i].Family}</i></span>
                    <br>
                    <span id = "scientific"><i>${dragonflies[i].Scientific}</i></span>
                    <br>
                    <span id = "english">${dragonflies[i].English}</span>
                    <br>
                    
                    <img id = "dragonfly-img" src = "images/${dragonflies[i].Scientific}.jpg"
                </div>
           
            `
      
        }

        else {
            allNamesDOMCollection[i].style.display = "none"
        }

        if (searchInput.value.length == 0) {
            renderDragonflies()
        }
    }
})
